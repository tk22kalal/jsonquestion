<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Medical Quiz</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f2f2f2;
      margin: 0;
      padding: 20px;
    }
    .quiz-container {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      max-width: 900px;
      margin: auto;
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
    }
    .question {
      font-weight: bold;
      margin-bottom: 15px;
    }
    .options button {
      display: block;
      margin: 8px 0;
      padding: 10px;
      width: 100%;
      background: #e0e0e0;
      border: none;
      border-radius: 8px;
      text-align: left;
      transition: background 0.3s ease;
      cursor: pointer;
    }
    .options button.correct {
      background: #c8e6c9;
    }
    .options button.incorrect {
      background: #ffcdd2;
    }
    .explanation {
      margin-top: 20px;
      background: #f9f9f9;
      padding: 15px;
      border-left: 4px solid #2196F3;
    }
    img {
      max-width: 100%;
      margin-top: 10px;
    }
    audio {
      margin-top: 10px;
      width: 100%;
    }
  </style>
</head>
<body>
<div class="quiz-container" id="quiz"></div>

<script>
  // DO NOT CHANGE THIS LINE â€” Required format
  questions = [{&quot;text&quot;: &quot;Match the gas to its respective cylinder body and shoulder colors...&quot;, &quot;options&quot;: [{&quot;label&quot;: &quot;A&quot;, &quot;text&quot;: &quot;1-a-i ; 2-b-ii ; 3-c-iii; 4-d-iv ; 5-e-v ; 6-f-vi&quot;, &quot;correct&quot;: true}, {&quot;label&quot;: &quot;B&quot;, &quot;text&quot;: &quot;1-a-vi ; 2-b-ii ; 3-c-iii; 4-d-iv ; 5-d-v ; 6-f-i&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;C&quot;, &quot;text&quot;: &quot;1-a-i ; 2-b-v ; 3-c-iii; 4-d-iv ; 5-d-ii ; 6-f-vi&quot;, &quot;correct&quot;: false}, {&quot;label&quot;: &quot;D&quot;, &quot;text&quot;: &quot;1-a-i ; 2-b-ii ; 3-d-iv; 4-c-iii ; 5-d-v ; 6-f-vi&quot;, &quot;correct&quot;: false}], &quot;correct_answer&quot;: &quot;A. 1-a-i ; 2-b-ii ; 3-c-iii; 4-d-iv ; 5-e-v ; 6-f-vi&quot;, &quot;question_images&quot;: [], &quot;explanation_images&quot;: [], &quot;explanation&quot;: &quot;&lt;table&gt;...&lt;/table&gt;&quot;, &quot;bot&quot;: &quot;@dams_new_robot&quot;, &quot;audio&quot;: &quot;https://image.prepladder.com/content/PndBcRhfXrapYZlBx4QC1737884809.mp3&quot;, &quot;video&quot;: &quot;&quot;}];

  // Decode HTML entities from encoded JSON
  const decodeEntities = str => {
    const textarea = document.createElement('textarea');
    textarea.innerHTML = str;
    return textarea.value;
  };

  // Render the quiz
  const container = document.getElementById('quiz');
  questions.forEach((q, index) => {
    const questionCard = document.createElement('div');
    questionCard.classList.add('question-card');

    const questionText = document.createElement('div');
    questionText.classList.add('question');
    questionText.innerHTML = decodeEntities(q.text);
    questionCard.appendChild(questionText);

    // Add images if present
    if (q.question_images && q.question_images.length) {
      q.question_images.forEach(img => {
        const imageEl = document.createElement('img');
        imageEl.src = decodeEntities(img);
        questionCard.appendChild(imageEl);
      });
    }

    // Add options
    const optionsDiv = document.createElement('div');
    optionsDiv.classList.add('options');
    q.options.forEach(opt => {
      const btn = document.createElement('button');
      btn.textContent = `${opt.label}. ${opt.text}`;
      btn.onclick = () => {
        const allBtns = btn.parentElement.querySelectorAll('button');
        allBtns.forEach(b => {
          const lbl = b.textContent[0];
          const optObj = q.options.find(o => o.label === lbl);
          if (optObj.correct) b.classList.add('correct');
          else if (b === btn) b.classList.add('incorrect');
        });
        // Show explanation
        if (!questionCard.querySelector('.explanation')) {
          const explanationDiv = document.createElement('div');
          explanationDiv.classList.add('explanation');
          explanationDiv.innerHTML = `
            <strong>Correct Answer:</strong> ${decodeEntities(q.correct_answer)}<br><br>
            ${decodeEntities(q.explanation)}
          `;

          // Explanation Images
          if (q.explanation_images && q.explanation_images.length) {
            q.explanation_images.forEach(img => {
              const imgEl = document.createElement('img');
              imgEl.src = decodeEntities(img);
              explanationDiv.appendChild(imgEl);
            });
          }

          // Audio
          if (q.audio) {
            const audio = document.createElement('audio');
            audio.controls = true;
            audio.src = decodeEntities(q.audio);
            explanationDiv.appendChild(audio);
          }

          questionCard.appendChild(explanationDiv);
        }
      };
      optionsDiv.appendChild(btn);
    });

    questionCard.appendChild(optionsDiv);
    container.appendChild(questionCard);
  });
</script>
</body>
</html>
